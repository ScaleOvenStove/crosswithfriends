/* tslint:disable */
/* eslint-disable */
/**
 * CrossWithFriends API
 * API for the CrossWithFriends crossword puzzle platform
 *
 * The version of the OpenAPI document: 1.0.0
 *
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

import * as runtime from '../runtime';
import type { GetOembed200Response, ListPuzzles400Response } from '../models/index';
import {
  GetOembed200ResponseFromJSON,
  GetOembed200ResponseToJSON,
  ListPuzzles400ResponseFromJSON,
  ListPuzzles400ResponseToJSON,
} from '../models/index';

export interface GetLinkPreviewRequest {
  url: string;
}

export interface GetOembedRequest {
  author: string;
}

/**
 * LinkPreviewApi - interface
 *
 * @export
 * @interface LinkPreviewApiInterface
 */
export interface LinkPreviewApiInterface {
  /**
   * Generates Open Graph metadata for social media link previews
   * @summary Get link preview
   * @param {string} url URL to generate preview for
   * @param {*} [options] Override http request option.
   * @throws {RequiredError}
   * @memberof LinkPreviewApiInterface
   */
  getLinkPreviewRaw(
    requestParameters: GetLinkPreviewRequest,
    initOverrides?: RequestInit | runtime.InitOverrideFunction
  ): Promise<runtime.ApiResponse<string>>;

  /**
   * Generates Open Graph metadata for social media link previews
   * Get link preview
   */
  getLinkPreview(
    url: string,
    initOverrides?: RequestInit | runtime.InitOverrideFunction
  ): Promise<string>;

  /**
   * Returns oEmbed format metadata for link previews
   * @summary Get oEmbed data
   * @param {string} author Author name
   * @param {*} [options] Override http request option.
   * @throws {RequiredError}
   * @memberof LinkPreviewApiInterface
   */
  getOembedRaw(
    requestParameters: GetOembedRequest,
    initOverrides?: RequestInit | runtime.InitOverrideFunction
  ): Promise<runtime.ApiResponse<GetOembed200Response>>;

  /**
   * Returns oEmbed format metadata for link previews
   * Get oEmbed data
   */
  getOembed(
    author: string,
    initOverrides?: RequestInit | runtime.InitOverrideFunction
  ): Promise<GetOembed200Response>;
}

/**
 *
 */
export class LinkPreviewApi extends runtime.BaseAPI implements LinkPreviewApiInterface {
  /**
   * Generates Open Graph metadata for social media link previews
   * Get link preview
   */
  async getLinkPreviewRaw(
    requestParameters: GetLinkPreviewRequest,
    initOverrides?: RequestInit | runtime.InitOverrideFunction
  ): Promise<runtime.ApiResponse<string>> {
    if (requestParameters['url'] == null) {
      throw new runtime.RequiredError(
        'url',
        'Required parameter "url" was null or undefined when calling getLinkPreview().'
      );
    }

    const queryParameters: any = {};

    if (requestParameters['url'] != null) {
      queryParameters['url'] = requestParameters['url'];
    }

    const headerParameters: runtime.HTTPHeaders = {};

    let urlPath = `/link_preview/`;

    const response = await this.request(
      {
        path: urlPath,
        method: 'GET',
        headers: headerParameters,
        query: queryParameters,
      },
      initOverrides
    );

    if (this.isJsonMime(response.headers.get('content-type'))) {
      return new runtime.JSONApiResponse<string>(response);
    } else {
      return new runtime.TextApiResponse(response) as any;
    }
  }

  /**
   * Generates Open Graph metadata for social media link previews
   * Get link preview
   */
  async getLinkPreview(
    url: string,
    initOverrides?: RequestInit | runtime.InitOverrideFunction
  ): Promise<string> {
    const response = await this.getLinkPreviewRaw({ url: url }, initOverrides);
    return await response.value();
  }

  /**
   * Returns oEmbed format metadata for link previews
   * Get oEmbed data
   */
  async getOembedRaw(
    requestParameters: GetOembedRequest,
    initOverrides?: RequestInit | runtime.InitOverrideFunction
  ): Promise<runtime.ApiResponse<GetOembed200Response>> {
    if (requestParameters['author'] == null) {
      throw new runtime.RequiredError(
        'author',
        'Required parameter "author" was null or undefined when calling getOembed().'
      );
    }

    const queryParameters: any = {};

    if (requestParameters['author'] != null) {
      queryParameters['author'] = requestParameters['author'];
    }

    const headerParameters: runtime.HTTPHeaders = {};

    let urlPath = `/oembed`;

    const response = await this.request(
      {
        path: urlPath,
        method: 'GET',
        headers: headerParameters,
        query: queryParameters,
      },
      initOverrides
    );

    return new runtime.JSONApiResponse(response, (jsonValue) =>
      GetOembed200ResponseFromJSON(jsonValue)
    );
  }

  /**
   * Returns oEmbed format metadata for link previews
   * Get oEmbed data
   */
  async getOembed(
    author: string,
    initOverrides?: RequestInit | runtime.InitOverrideFunction
  ): Promise<GetOembed200Response> {
    const response = await this.getOembedRaw({ author: author }, initOverrides);
    return await response.value();
  }
}
